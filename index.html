<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Giá Vàng Hôm Nay - Minh Sang</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />
    <style>
        :root {
            --gold: #d4af37;
            --light-gold: #FFD700;
            --dark-red: #5b0f1b;
            --bright-red: #7a1c2b;
            --glass: rgba(60, 10, 20, 0.85);
        }

        body {
            background: linear-gradient(to bottom right, var(--dark-red), var(--bright-red));
            color: var(--gold);
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Hiệu ứng ánh kim nền */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(120deg, rgba(255, 215, 0, 0.05), rgba(255, 255, 255, 0.02), rgba(255, 215, 0, 0.05));
            background-size: 200% 200%;
            animation: shimmer 10s infinite linear;
            z-index: -1;
        }

        @keyframes shimmer {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }

        /* KHỐI TIÊU ĐỀ TRÊN CÙNG - CĂN GIỮA TUYỆT ĐỐI */
        .top-header {
            text-align: center;
            padding-top: 20px;
            margin-bottom: 10px;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.2em;
            font-weight: 700;
            margin: 0 !important;
            color: var(--light-gold);
            text-shadow: 2px 4px 8px rgba(0,0,0,0.5);
            text-transform: uppercase;
        }

        .tax-code-top {
            font-size: 1.8em;
            font-weight: 600;
            color: var(--gold);
            margin-top: -5px !important; /* Ép sát tên DN */
            display: block;
        }

        /* HÀNG THÔNG TIN PHỤ (LOGO & ĐỊA CHỈ & GIỜ) */
        .info-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 40px;
            margin-bottom: 10px;
        }

        .logo-box img {
            height: 120px;
            filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.3));
        }

        .address-box {
            flex-grow: 1;
            text-align: center;
            font-size: 1.3em;
            font-style: italic;
            padding: 0 20px;
        }

        #datetime {
            font-size: 2.2em;
            font-weight: bold;
            color: var(--light-gold);
            min-width: 350px;
            text-align: right;
        }

        /* NỘI DUNG CHÍNH */
        .main-content {
            display: flex;
            gap: 25px;
            padding: 0 25px 80px 25px;
        }

        .table-container {
            flex: 2;
            background: var(--glass);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--gold);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .chart-container {
            flex: 1;
            background: var(--glass);
            border-radius: 15px;
            padding: 15px;
            border: 1px solid var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chart-container img {
            width: 100%;
            border-radius: 8px;
            border: 1px solid var(--gold);
        }

        /* STYLE BẢNG */
        .custom-table {
            width: 100%;
            margin-bottom: 0;
            border-color: var(--gold);
        }

        .custom-table thead th {
            background-color: var(--bright-red) !important;
            color: var(--light-gold) !important;
            font-size: 1.4em;
            padding: 15px;
            border-bottom: 2px solid var(--gold);
        }

        .custom-table td {
            background-color: transparent !important;
            color: #fff !important;
            font-size: 1.6em;
            padding: 20px !important;
            vertical-align: middle;
            border-color: rgba(212, 175, 55, 0.3);
        }

        .custom-table td:nth-child(2), 
        .custom-table td:nth-child(3) {
            font-size: 2.4em;
            font-weight: 700;
            color: var(--light-gold) !important;
        }

        .custom-table tbody tr:hover td {
            background-color: rgba(122, 28, 43, 0.5) !important;
        }

        /* FOOTER CỐ ĐỊNH */
        .fixed-footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: rgba(40, 5, 10, 0.95);
            color: var(--light-gold);
            text-align: center;
            padding: 15px 0;
            font-size: 1.8em;
            font-weight: bold;
            border-top: 2px solid var(--gold);
            z-index: 1000;
        }

        footer {
            text-align: center;
            padding: 10px;
            font-size: 0.9em;
            opacity: 0.7;
        }
    </style>
</head>
<body>

    <div class="top-header">
        <h1>DOANH NGHIỆP TƯ NHÂN KINH DOANH TIỆM VÀNG MINH SANG</h1>
        <span class="tax-code-top">MÃ SỐ THUẾ: 3702786679</span>
    </div>

    <div class="info-bar">
        <div class="logo-box">
            <a href="/"><img src="https://i.imgur.com/bAZ9qcX.png" alt="Logo"></a>
        </div>
        <div class="address-box">
            ĐỊA CHỈ: 119A ĐƯỜNG D1, KHU PHỐ ĐÔNG AN, PHƯỜNG TÂN ĐÔNG HIỆP, TP. DĨ AN, BÌNH DƯƠNG
        </div>
        <div id="datetime">Đang tải...</div>
    </div>

    <div class="main-content">
        <div class="table-container">
            <table class="table table-bordered text-center custom-table">
                <thead>
                    <tr>
                        <th>Loại Vàng</th>
                        <th>Mua Vào</th>
                        <th>Bán Ra</th>
                    </tr>
                </thead>
                <tbody id="gold-prices">
                    </tbody>
            </table>
        </div>

        <div class="chart-container">
            <img id="kitcoChart" alt="Biểu đồ Kitco">
        </div>
    </div>

    <div class="fixed-footer">
        BẢNG GIÁ CHỈ ÁP DỤNG CHO VÀNG CỦA CHÚNG TÔI.
    </div>

    <script>
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateString = now.toLocaleDateString('vi-VN', options);
            const timeString = now.toLocaleTimeString('vi-VN');
            document.getElementById("datetime").innerHTML = `${timeString}<br><small style="font-size:0.5em">${dateString}</small>`;
        }
        setInterval(updateDateTime, 1000);
        updateDateTime();

        function updateKitcoChart() {
            const timestamp = new Date().getTime();
            document.getElementById('kitcoChart').src = `https://www.kitco.com/chart-images/images/live/gold.gif?t=${timestamp}`;
        }
        setInterval(updateKitcoChart, 300000);
        updateKitcoChart();

        function parseCSVLine(line) {
            const values = [];
            let current = '';
            let insideQuotes = false;
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                if (char === '"' && line[i + 1] === '"') { current += '"'; i++; }
                else if (char === '"') { insideQuotes = !insideQuotes; }
                else if (char === ',' && !insideQuotes) { values.push(current.trim()); current = ''; }
                else { current += char; }
            }
            values.push(current.trim());
            return values;
        }

        function updateGoldPrices() {
            const url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRoDmMh9geQzip7IJv4Qrj246sWbb--9Sza85EfzDBVaqYzEtwdAtypf8TYqa7ZXQje9r_ceKotiG3O/pub?output=csv";
            fetch(url).then(res => res.text()).then(data => {
                const rows = data.split("\n").slice(1);
                const tableBody = document.getElementById("gold-prices");
                tableBody.innerHTML = "";
                rows.forEach(row => {
                    const columns = parseCSVLine(row);
                    if (columns.length >= 3) {
                        const tr = document.createElement("tr");
                        tr.innerHTML = `<td>${columns[0]}</td><td>${columns[1]}</td><td>${columns[2]}</td>`;
                        tableBody.appendChild(tr);
                    }
                });
            });
        }
        updateGoldPrices();
        setInterval(updateGoldPrices, 300000);
        setTimeout(() => location.reload(), 900000); // Reload sau 15 phút
    </script>
</body>
</html>
