<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Giá Vàng Hôm Nay</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet" />
    <style>
        /* TỐI ƯU CẤU TRÚC BODY & NỀN */
        body {
            background: linear-gradient(to bottom right, #5b0f1b, #7a1c2b);
            color: #d4af37;
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* HIỆU ỨNG ÁNH KIM (GIỮ NGUYÊN) */
        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(120deg, rgba(255, 215, 0, 0.1), rgba(255, 255, 255, 0.05), rgba(255, 215, 0, 0.1));
            background-size: 200% 200%; animation: shimmer 10s infinite linear; pointer-events: none; z-index: -1;
        }
        @keyframes shimmer { 0%, 100% { background-position: 0% 0%; } 50% { background-position: 100% 100%; } }

        /* === TỐI ƯU VỊ TRÍ HEADER: ÉP SÁT NHAU === */
        h1 {
            text-align: center;
            margin: 20px 0 0 0 !important; /* Triệt margin bottom */
            color: #FFD700;
            font-family: 'Playfair Display', serif;
            font-size: 2.8em;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.6);
            line-height: 1.05 !important;
        }

        .header-info-group {
            text-align: center;
            color: #d4af37 !important;
        }

        .tax-code {
            font-size: 2.2em;
            font-weight: 700;
            margin: -6px 0 0 0 !important; /* Ép sát lên tên doanh nghiệp */
            display: block;
        }

        .address {
            font-size: 1.2em;
            font-style: italic;
            margin: -2px 0 0 0 !important; /* Ép sát lên MST */
            display: block;
        }

        #datetime {
            font-size: 3em;
            margin: -2px 0 10px 0 !important; /* Ép sát lên địa chỉ */
            display: block;
        }

        /* === BỐ CỤC LOGO & NỘI DUNG (GIỮ NGUYÊN KÍCH THƯỚC) === */
        .logo-top-left {
            position: absolute;
            top: 10px;
            left: 20px;
            z-index: 10;
        }
        .logo-top-left img { height: 150px; width: auto; }

        .main-content {
            display: flex;
            justify-content: space-between;
            padding: 20px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .table-container {
            flex: 1 1 60%; /* Giữ nguyên 60% */
            background-color: rgba(90, 15, 27, 0.85);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
            min-height: 550px;
        }

        .chart-container {
            flex: 1.5 1 35%; /* Giữ nguyên 35% */
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
            min-height: 550px;
            text-align: center;
        }

        /* TỐI ƯU BẢNG (GOM NHÓM STYLE) */
        .table { width: 100%; font-size: 1.5em; color: #fff; border-collapse: collapse; }
        .table thead { background-color: #7a1c2b !important; color: #d4af37 !important; }
        .table th, .table td { 
            text-align: center; vertical-align: middle; padding: 20px; 
            border: 1px solid #555; height: 100px; 
        }
        .table td { background-color: rgba(60, 10, 20, 0.85) !important; color: #d4af37 !important; }
        .table td:nth-child(2), .table td:nth-child(3) { font-size: 2.8em; font-weight: bold; color: #fbc02d; }
        .table tbody tr:hover { background-color: rgba(120, 30, 45, 0.85) !important; transition: 0.3s; }

        .chart-container img {
            width: 100%; height: auto; border-radius: 10px;
            border: 2px solid #FFD700; box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .fixed-footer {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: rgba(60, 10, 20, 0.9); color: #d4af37;
            text-align: center; padding: 12px 0; font-size: 2em;
            z-index: 9999; box-shadow: 0 -2px 8px rgba(0,0,0,0.3);
        }

        footer { text-align: center; color: #bbb; font-size: 0.9em; margin-bottom: 60px; }
    </style>
</head>
<body>

    <div class="logo-top-left">
        <a href="/"><img src="https://i.imgur.com/bAZ9qcX.png" alt="Logo"></a>
    </div>

    <h1>DOANH NGHIỆP TƯ NHÂN KINH DOANH TIỆM VÀNG MINH SANG</h1>
    
    <div class="header-info-group">
        <div class="tax-code">MÃ SỐ THUẾ: 3702786679</div>
        <div class="address">ĐỊA CHỈ: 119A ĐƯỜNG D1, KHU PHỐ ĐÔNG AN, PHƯỜNG TÂN ĐÔNG HIỆP, TP. DĨ AN, BÌNH DƯƠNG</div>
        <div id="datetime">Đang tải ngày giờ...</div>
    </div>

    <div class="main-content">
        <div class="table-container">
            <table class="table table-bordered text-center">
                <thead>
                    <tr>
                        <th>Loại Vàng</th>
                        <th>Giá Mua (VNĐ/CHỈ)</th>
                        <th>Giá Bán (VNĐ/CHỈ)</th>
                    </tr>
                </thead>
                <tbody id="gold-prices"></tbody>
            </table>
        </div>
        <div class="chart-container">
            <img id="kitcoChart" alt="Biểu đồ giá vàng">
        </div>
    </div>

    <footer>&copy; 2025 DNTN KD Tiệm Vàng Minh Sang</footer>
    <div class="fixed-footer">Bảng giá chỉ áp dụng cho vàng của chúng tôi.</div>

    <script>
        function updateDateTime() {
            const now = new Date();
            const weekday = now.toLocaleDateString('vi-VN', { weekday: 'long' });
            const dateString = now.toLocaleDateString('vi-VN', { day: 'numeric', month: 'long', year: 'numeric' });
            const timeString = now.toLocaleTimeString('vi-VN');
            document.getElementById("datetime").textContent = `${timeString} - ${weekday}, ${dateString}`;
        }
        updateDateTime();
        setInterval(updateDateTime, 1000);

        function updateKitcoChart() {
            const img = document.getElementById('kitcoChart');
            img.src = `https://proxy.duckduckgo.com/iu/?u=https://www.kitco.com/chart-images/images/live/gold.gif&t=${new Date().getTime()}`;
        }
        updateKitcoChart();
        setInterval(updateKitcoChart, 300000);

        function parseCSVLine(line) {
            const values = []; let current = ''; let insideQuotes = false;
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                if (char === '"' && line[i + 1] === '"') { current += '"'; i++; }
                else if (char === '"') { insideQuotes = !insideQuotes; }
                else if (char === ',' && !insideQuotes) { values.push(current.trim()); current = ''; }
                else { current += char; }
            }
            values.push(current.trim());
            return values;
        }

        function updateGoldPrices() {
            const url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRoDmMh9geQzip7IJv4Qrj246sWbb--9Sza85EfzDBVaqYzEtwdAtypf8TYqa7ZXQje9r_ceKotiG3O/pub?output=csv";
            fetch(url).then(res => res.text()).then(data => {
                const rows = data.split("\n").slice(1);
                const tableBody = document.getElementById("gold-prices");
                tableBody.innerHTML = "";
                rows.forEach(row => {
                    const columns = parseCSVLine(row);
                    if (columns.length >= 3) {
                        const tr = document.createElement("tr");
                        tr.innerHTML = `<td>${columns[0]}</td><td>${columns[1]}</td><td>${columns[2]}</td>`;
                        tableBody.appendChild(tr);
                    }
                });
            });
        }
        updateGoldPrices();
        setInterval(updateGoldPrices, 300000);
        setTimeout(() => location.reload(), 300000);
    </script>
</body>
</html>
